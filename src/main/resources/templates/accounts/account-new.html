<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <title>Открытие депозитного счета</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>

<body>
<div th:insert="header :: header"></div>

<div class="container">
    <header class="blog-header py-3">
        <div class="row flex-nowrap justify-content-between align-items-center">
            <h1 class="display-3">
                <td th:switch="${typeAccount}">
                    <span th:case="'CHECKING'">Депозитные счета</span>
                    <span th:case="'SAVING'">Накопительные счета</span>
                    <span th:case="'LOAN'">Кредиты</span>
                    <div th:case="*">

                    </div>
                </td>
            </h1>
        </div>
    </header>

    <div class="row d-flex justify-content-center align-items-center h-100">
        <div class="col-12 col-md-9 col-lg-7 col-xl-6">


            <form action="#" th:action="@{/accounts/{type}/new (type = ${typeAccount})} " th:object="${accountCreate}"
                  th:method="POST">


                <div class="card-group">
                    <div th:each="accountPlan : ${accountPlans}" class="card" style="width: 18rem;">
                        <div class="card-body">
                            <h5 th:text="${accountPlan.title}" class="card-title">Card title</h5>
                            <h6 th:text="'Процентная ставка: ' + ${accountPlan.percent} + '%'"
                                class="card-subtitle mb-2 text-muted">Card subtitle</h6>
                            <p th:text="${accountPlan.description}" class="card-text"></p>
                            <input type="radio" th:field="*{accountPlan}" th:value="${accountPlan.id}"/>
                        </div>
                    </div>
                </div>

                <div th:if="${typeAccount == 'SAVING'}" class="form-group">

                    <label for="amount">Сумма</label>
                    <input type="text" th:field="*{amount}" class="form-control" id="amount"
                           aria-describedby="amountHelp"
                           placeholder="Сумма">
                    <small th:if="${#fields.hasErrors('amount')}" th:errors="*{amount}" id="amountHelp"
                           class="form-text text-danger">Error</small>
                </div>


                <div th:if="${typeAccount == 'SAVING'}" class="form-group">
                    <label for="account">Выберите счет списания</label>
                    <select th:field="*{sourceAccount}" class="form-control" id="account">
                        <option th:each="a : ${checkingAccounts}" th:value="${a.id}"
                                th:text="'Баланс: ' + ${a.amount} + ' Тип: ' + ${a.accountPlan.title} ">
                        </option>
                    </select>
                </div>

                <div th:if="${typeAccount == 'SAVING'}" class="form-group">

                    <label for="amount">Период вклада в месяцах</label>
                    <input type="text" th:field="*{period}" class="form-control" id="period"
                           aria-describedby="periodHelp"
                           placeholder="Период">
                    <small th:if="${#fields.hasErrors('period')}" th:errors="*{period}" id="periodHelp"
                           class="form-text text-danger">Error</small>
                </div>

                <div th:if="${typeAccount == 'LOAN'}" class="form-group">

                    <label for="amount">Желаемая сумма кредита</label>
                    <input type="text" th:field="*{amount}" class="form-control" id="amount"
                           aria-describedby="amountHelp"
                           placeholder="Сумма">
                    <small th:if="${#fields.hasErrors('amount')}" th:errors="*{amount}" id="amountHelp"
                           class="form-text text-danger">Error</small>
                </div>

                <div th:if="${typeAccount == 'LOAN'}" class="form-group">

                    <label for="amount">Желаемый срок кредита</label>
                    <input type="text" th:field="*{period}" class="form-control" id="period"
                           aria-describedby="periodHelp"
                           placeholder="Период">
                    <small th:if="${#fields.hasErrors('period')}" th:errors="*{period}" id="periodHelp"
                           class="form-text text-danger">Error</small>
                </div>

                <div th:if="${typeAccount == 'LOAN'}" class="form-group">
                    <label for="account">Выберите для зачисления денежных средств</label>
                    <select th:field="*{sourceAccount}" class="form-control" id="account">
                        <option th:each="a : ${checkingAccounts}" th:value="${a.id}"
                                th:text="'Баланс: ' + ${a.amount} + ' Тип: ' + ${a.accountPlan.title} ">
                        </option>
                    </select>
                </div>


                <button type="submit" class="btn btn-primary">Добавить</button>

            </form>

            <div th:if="${#lists.isEmpty(accountPlans)}">
                <h2>Нет предложений</h2>
            </div>

            <a class="btn btn-info" href="/client" role="button">В личный кабинет</a>
        </div>
    </div>
</div>


</body>
</html>